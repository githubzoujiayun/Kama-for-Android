<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Kama for Android : An Android library for executing HTTP requests and parsing JSON files." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Kama for Android</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Label305/Kama-for-Android">View on GitHub</a>

          <h1 id="project_title">Kama for Android</h1>
          <h2 id="project_tagline">An Android library for executing HTTP requests and parsing JSON files.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Label305/Kama-for-Android/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Label305/Kama-for-Android/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="kama-for-android-" class="anchor" href="#kama-for-android-"><span class="octicon octicon-link"></span></a>Kama for Android <a href="https://travis-ci.org/Label305/Kama-for-Android"><img src="https://travis-ci.org/Label305/Kama-for-Android.svg?branch=master" alt="Build Status"></a>
</h1>

<p>Kama for Android is a library for easy executing HTTP requests, and parsing their JSON response into Pojo's. It uses <a href="https://github.com/FasterXML/jackson">Jackson</a> to map JSON to Plain Old Java Objects.</p>

<h2>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h2>

<p>To use this library, add the following dependency to your <code>build.gradle</code>:</p>

<pre><code>dependencies {
       compile 'com.label305.kama-for-android:library:0.2.+'
}
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a name="pojos" class="anchor" href="#pojos"><span class="octicon octicon-link"></span></a>POJO's</h3>

<p>A Plain Old Java Object needs to be formatted according to the Jackson library as follows:</p>

<div class="highlight highlight-java"><pre><span class="nd">@JsonIgnoreProperties</span><span class="o">(</span><span class="n">ignoreUnknown</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyObject</span> <span class="o">{</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>

<h3>
<a name="json" class="anchor" href="#json"><span class="octicon octicon-link"></span></a>Json</h3>

<p>You can execute HTTP requests and parse their responses by using the <code>JsonGetter</code>, <code>JsonPoster</code>, <code>JsonDeleter</code> and <code>JsonPutter</code> classes. Do not forget to provide the <code>Class</code> parameter in the constructor! </p>

<p>Example:</p>

<div class="highlight highlight-java"><pre><span class="cm">/* Retrieve and parse a single object */</span>
<span class="n">JsonGetter</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">jsonGetter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonGetter</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">MY_URL</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setJsonTitle</span><span class="o">(</span><span class="s">"my_object"</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setUrlData</span><span class="o">(</span><span class="n">myUrlData</span><span class="o">);</span>

<span class="n">MyObject</span> <span class="n">myObject</span> <span class="o">=</span> <span class="n">jsonGetter</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

<span class="cm">/* Retrieve and parse a list of objects */</span>
<span class="n">JsonGetter</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">jsonGetter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonGetter</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;(</span><span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">MY_URL</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setJsonTitle</span><span class="o">(</span><span class="s">"my_object"</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setUrlData</span><span class="o">(</span><span class="n">myUrlData</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">myObject</span> <span class="o">=</span> <span class="n">jsonGetter</span><span class="o">.</span><span class="na">executeReturnsObjectsList</span><span class="o">();</span>
</pre></div>

<p>The <code>Poster</code>, <code>Deleter</code> and <code>Putter</code> classes work similarly.</p>

<p>If there is no parseable response, use <code>Void</code>:</p>

<div class="highlight highlight-java"><pre><span class="cm">/* Retrieve and parse a single object */</span>
<span class="n">JsonDeleter</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="n">jsonDeleter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonDeleter</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;();</span>
<span class="n">jsonDeleter</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">MY_URL</span><span class="o">);</span>
<span class="n">jsonDeleter</span><span class="o">.</span><span class="na">setUrlData</span><span class="o">(</span><span class="n">myUrlData</span><span class="o">);</span>

<span class="n">jsonDeleter</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span> <span class="c1">//returns null</span>
</pre></div>

<p>If you forget to pass the class in the constructor, the execute methods will return <code>null</code>!</p>

<p>If the response code is not <code>200</code> or <code>202</code>, a <code>HttpResponseKamaException</code> is thrown, including the meta data, stored in an instance of <code>KamaError</code> class.</p>

<h3>
<a name="kama-formatted-json" class="anchor" href="#kama-formatted-json"><span class="octicon octicon-link"></span></a>Kama formatted JSON</h3>

<p>A Kama formatted JSON response looks like this:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"meta"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="mi">200</span>
    <span class="p">},</span>
    <span class="nt">"response"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"my_objects"</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>You can use the <code>KamaWrapper</code> class to do Kama requests. This class wraps a <code>AbstractJsonRequester</code> and adds the necessary headers and url parameters for the request. Instead of providing your <code>MyObject</code> class to the <code>AbstractJsonRequester</code>, provide <code>KamaObject</code>. Provide the <code>MyObject</code> class to the <code>KamaWrapper</code>:</p>

<div class="highlight highlight-java"><pre><span class="cm">/* Retrieve and parse a single object */</span>
<span class="n">JsonGetter</span><span class="o">&lt;</span><span class="n">KamaObject</span><span class="o">&gt;</span> <span class="n">jsonGetter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonGetter</span><span class="o">&lt;&gt;(</span><span class="n">KamaObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">MY_URL</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setJsonTitle</span><span class="o">(</span><span class="s">"my_object"</span><span class="o">);</span>
<span class="n">jsonGetter</span><span class="o">.</span><span class="na">setUrlData</span><span class="o">(</span><span class="n">myUrlData</span><span class="o">);</span>

<span class="n">KamaWrapper</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KamaWrapper</span><span class="o">(</span><span class="n">mContext</span><span class="o">,</span> <span class="n">jsonGetter</span><span class="o">,</span> <span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">MyObject</span> <span class="n">myObject</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright 2014 Label305 B.V.</p>

<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Kama for Android maintained by <a href="https://github.com/Label305">Label305</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
